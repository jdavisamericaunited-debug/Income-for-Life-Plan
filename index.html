<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Income-for-Life Plan – AmericaPlanning</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body {
      margin: 0;
      padding: 0;
      background: #e5e7eb;
    }

    /* Light Blue for His Social Security */
    #ssHisAnnual, #ssHisStartAge {
      background-color: lightblue;
    }

    /* Light Pink for Her Social Security */
    #ssHerAnnual, #ssHerStartAge {
      background-color: lightpink;
    }

    /* Negative gap coloring */
    .negative-gap {
      color: red;
      font-weight: bold;
    }
  </style>
</head>
<body>
<div id="ap-rotate-tip" style="display:none;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;">
  Turn phone sideways for easy viewing.
</div>

<div id="ap-ifl-app">
  <style>
    #ap-ifl-app,
    #ap-ifl-app * {
      box-sizing: border-box;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
    }

    #ap-ifl-app {
      max-width: 1200px;
      margin: 0 auto;
      padding: 24px 20px 32px;
      background: #f3f4f6;
      color: #111827;
    }

    #ap-ifl-app h1 {
      font-size: 26px;
      margin: 0 0 4px;
    }

    #ap-ifl-app .ap-page-caption {
      font-size: 13px;
      color: #6b7280;
      margin-bottom: 16px;
    }

    .ap-plan-table td {
      text-align: right;
      white-space: nowrap;
    }

    .ap-save-row {
      text-align: right;
      margin-top: 4px;
    }
  </style>

  <h1>Income-for-Life Plan – Data, Asset Summary & Plan Inputs</h1>
  <div class="ap-page-caption">
    Internal planning tool – designed for desktop use.
  </div>

  <!-- Form Starts -->
  <form id="ap-goals-data-form">
    <!-- Inputs for Social Security -->
    <div class="ap-section">
      <div class="ap-section-title">Social Security Information</div>
      <div class="ap-grid-2">
        <div class="ap-field">
          <label for="ssHisAnnual">His Social Security (annual)</label>
          <input id="ssHisAnnual" name="ssHisAnnual" type="text" placeholder="$25,000">
        </div>
        <div class="ap-field">
          <label for="ssHerAnnual">Her Social Security (annual)</label>
          <input id="ssHerAnnual" name="ssHerAnnual" type="text" placeholder="$12,500">
        </div>
      </div>
    </div>

    <!-- Other Input Sections -->

    <!-- Save Button -->
    <div class="ap-save-row">
      <button type="button" id="ap-save-data-btn" class="ap-primary-btn">
        Save Data &amp; Jump to Asset Summary
      </button>
    </div>
  </form>
  <!-- Form Ends -->

  <!-- JavaScript Starts -->
  <script>
    // Auto-save functionality
    function apSaveGoalsDataToStorage() {
      if (!window.localStorage) return;
      var form = document.getElementById('ap-goals-data-form');
      if (!form) return;
      var data = {};
      Array.prototype.forEach.call(form.elements, function(el) {
        if (!el.name) return;
        if (['button','submit','reset'].indexOf(el.type) !== -1) return;
        data[el.name] = el.value;
      });
      localStorage.setItem('apGoalsDataForm', JSON.stringify(data));
    }

    function apLoadGoalsDataFromStorage() {
      if (!window.localStorage) return;
      var raw = localStorage.getItem('apGoalsDataForm');
      if (!raw) return;
      var form = document.getElementById('ap-goals-data-form');
      if (!form) return;
      var data;
      try { data = JSON.parse(raw); } catch(e) { return; }
      Object.keys(data).forEach(function(name) {
        var el = form.elements[name];
        if (!el) return;
        el.value = data[name];
      });
    }

    // Color Negative Gap values
    function apColorNegativeGaps() {
      var gapElements = document.querySelectorAll('.ap-plan-table .gap');
      gapElements.forEach(function(gap) {
        var gapValue = parseFloat(gap.innerText.replace(/[^0-9.-]+/g, ""));
        if (gapValue < 0) {
          gap.classList.add('negative-gap');
        }
      });
    }

    // Event listeners
    document.addEventListener('DOMContentLoaded', function() {
      apLoadGoalsDataFromStorage();

      var saveBtn = document.getElementById('ap-save-data-btn');
      if (saveBtn) {
        saveBtn.addEventListener('click', function() {
          apSaveGoalsDataToStorage();
          alert('Client data saved!');
        });
      }

      // Apply negative gap coloring
      apColorNegativeGaps();
    });
  </script>
  <!-- JavaScript Ends -->

</div>
</body>
</html>
